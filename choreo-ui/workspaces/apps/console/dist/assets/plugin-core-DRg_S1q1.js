import{j as i,B as R}from"./design-system-BR9GEEhY.js";import{r as l,b as g,c as v,d as E}from"./router-vendor-DBcYkEYk.js";import{P as H}from"./common-views-DKsa_NGO.js";var s;(function(e){e.NAVIGATION="nav-item",e.ROUTE="route",e.PANEL="panel",e.PROVIDER="provider"})(s||(s={}));const V={globalProvider:{id:"global",type:s.PROVIDER},componentLevelPage:{id:"component-level-page",type:s.ROUTE},projectLevelPage:{id:"project-level-page",type:s.ROUTE},orgLevelPage:{id:"org-level-page",type:s.ROUTE},globalPage:{id:"global-page",type:s.ROUTE},headerLeft:{id:"header-left",type:s.PANEL},headerRight:{id:"header-right",type:s.PANEL},sidebarRight:{id:"sidebar-right",type:s.PANEL},componentNavigation:{id:"component-navigation",type:s.NAVIGATION},projectNavigation:{id:"project-navigation",type:s.NAVIGATION},orgNavigation:{id:"org-navigation",type:s.NAVIGATION},footer:{id:"footer",type:s.PANEL}};var f;(function(e){e.ORG_LEVEL="organization/:orgHandle",e.PROJECT_LEVEL="organization/:orgHandle/project/:projectHandle",e.COMPONENT_LEVEL="organization/:orgHandle/project/:projectHandle/component/:componentHandle"})(f||(f={}));var u;(function(e){e.ORG_LEVEL="organization/:orgHandle/*",e.PROJECT_LEVEL="organization/:orgHandle/project/:projectHandle/*",e.COMPONENT_LEVEL="organization/:orgHandle/project/:projectHandle/component/:componentHandle/*"})(u||(u={}));const C=(e,n={})=>{const{orgHandle:t,projectHandle:o,componentHandle:a,subPath:r}=e,p=Object.entries(n).map(([c,h])=>`${c}=${h}`).join("&");if(a)return`/organization/${t}/project/${o}/component/${a}${r?`/${r}`:""}?${p}`;if(o)return`/organization/${t}/project/${o}${r?`/${r}`:""}?${p}`;if(t)return`/organization/${t}${r?`/${r}`:""}?${p}`},m=l.createContext({pluginRegistry:[],basePath:"localhost:3000"});function I({pluginRegistry:e,children:n,basePath:t}){return i.jsx(m.Provider,{value:{pluginRegistry:e,basePath:t},children:n})}function d(){const{pluginRegistry:e}=l.useContext(m);return e}function A(){const{basePath:e}=l.useContext(m);return e}function T(e,n){const t=d();return l.useMemo(()=>t.flatMap(a=>a.extensions.filter(r=>r.extentionPoint.id===e.id&&r.extentionPoint.type===e.type).map(r=>{var p;return{title:r.name,id:r.name,icon:i.jsx(r.icon,{}),selectedIcon:i.jsx(r.iconSelected,{}),href:n+r.path,pathPattern:r.pathPattern,subMenuItems:(p=r.submenu)==null?void 0:p.map(c=>({title:c.name,id:c.name,icon:i.jsx(c.icon,{}),selectedIcon:i.jsx(c.iconSelected,{}),href:n+r.path+c.path,pathPattern:c.pathPattern}))}})),[t,e,n])}function L(e){const n=d();return l.useMemo(()=>n.flatMap(o=>o.extensions.filter(a=>a.extentionPoint.id===e.id&&a.extentionPoint.type===e.type)),[n,e])}function O(e){const n=d();return l.useMemo(()=>n.flatMap(o=>o.extensions.filter(a=>a.extentionPoint.id===e.id&&a.extentionPoint.type===e.type)),[n,e])}function $(e){const n=d();return l.useMemo(()=>n.flatMap(t=>t.extensions.filter(o=>o.extentionPoint.id===e.id&&o.extentionPoint.type===e.type)),[n,e])}function P(){return g(u.ORG_LEVEL)}function z(){var n;const e=P();return(n=e==null?void 0:e.params)==null?void 0:n.orgHandle}function b(){var n;const e=j();return(n=e==null?void 0:e.params)==null?void 0:n.projectHandle}function _(){var n;const e=x();return(n=e==null?void 0:e.params)==null?void 0:n.componentHandle}function j(){return g(u.PROJECT_LEVEL)}function x(){return g(u.COMPONENT_LEVEL)}function G(){const e=P(),n=j(),t=x();return l.useMemo(()=>{if(t!=null&&t.params){const{orgHandle:o,projectHandle:a,componentHandle:r}=t.params;return`/organization/${o}/project/${a}/component/${r}`}if(n!=null&&n.params){const{orgHandle:o,projectHandle:a}=n.params;return`/organization/${o}/project/${a}`}if(e!=null&&e.params){const{orgHandle:o}=e.params;return`/organization/${o}`}return"/"},[e,n,t])}function U(e){const{extentionPoint:n}=e,t=L(n);return i.jsx(R,{testId:`extention-mounter-${n.id}`,children:t.map(o=>i.jsx(o.component,{},o.key))})}function k(e){const{extentionPoint:n,children:t}=e,o=O(n),a=l.useCallback(()=>o.reduceRight((r,p)=>{const c=p.component;return i.jsx(c,{children:r},p.key)},t),[o,t]);return i.jsx(i.Fragment,{children:a()})}function B(e){const{extentionPoint:n}=e,t=$(n);return i.jsxs(v,{children:[t.map(({pathPattern:o,component:a})=>i.jsx(E,{path:o,element:i.jsx(a,{})},o)),i.jsx(E,{path:"*",element:i.jsx(H,{preset:"404"})})]})}export{f as B,s as P,B as R,k as W,U as a,_ as b,V as c,z as d,A as e,u as f,C as g,I as h,G as i,T as j,b as u};
